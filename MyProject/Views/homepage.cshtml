@using Umbraco.Cms.Web.Common.PublishedModels;
@inherits Umbraco.Cms.Web.Common.Views.UmbracoViewPage
@{
    Layout = "master.cshtml";
    var heroTitle = Model.Value<string>("heroTitle") ?? "Transform Your Digital Experience";
    var heroSubtitle = Model.Value<string>("heroSubtitle") ?? "We help businesses create exceptional digital experiences with powerful content management solutions. Discover our innovative approach to web development and digital strategy.";
}

<!-- Hero Section -->
<section class="hero-section">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-6">
                <h1 class="display-4 fw-bold mb-4">@heroTitle</h1>
                <p class="lead mb-4">@heroSubtitle</p>
                <div class="d-flex gap-3 flex-wrap">
                    <a href="/products" class="btn btn-primary btn-lg">Explore Products</a>
                    <a href="#services" class="btn btn-outline-light btn-lg">Our Services</a>
                </div>
            </div>
            <div class="col-lg-6 text-center">
                <div class="hero-image-placeholder" style="background: rgba(255,255,255,0.1); border-radius: 20px; padding: 3rem; margin-top: 2rem;">
                    <i class="fas fa-laptop-code" style="font-size: 8rem; opacity: 0.7; color: white;"></i>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Services Section -->
<section id="services" style="background: #f8fafc; padding: 5rem 0;">
    <div class="container">
        <div class="mb-5">
            <p class="text-uppercase" style="color: var(--primary-button); font-weight: 500; letter-spacing: 1px; margin-bottom: 2rem;">What We Do →</p>
            <div class="row">
                <div class="col-lg-10">
                    <h2 class="fw-bold mb-4" style="color: #1f2937;">Comprehensive digital solutions tailored to your business needs</h2>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-4 col-md-6 mb-4">
                <div class="card service-card" style="background: white; border: 1px solid #e5e7eb; box-shadow: 0 1px 3px rgba(0,0,0,0.1); transition: all 0.3s ease;">
                    <div class="card-body" style="padding: 2.5rem 2rem;">
                        <div class="service-icon">
                            <i class="fas fa-code"></i>
                        </div>
                        <h5 class="card-title" style="color: #1f2937;">Web Development</h5>
                        <p class="card-text" style="color: #6b7280;">Custom web applications built with modern technologies and best practices for optimal performance.</p>
                    </div>
                </div>
            </div>
            <div class="col-lg-4 col-md-6 mb-4">
                <div class="card service-card" style="background: white; border: 1px solid #e5e7eb; box-shadow: 0 1px 3px rgba(0,0,0,0.1); transition: all 0.3s ease;">
                    <div class="card-body" style="padding: 2.5rem 2rem;">
                        <div class="service-icon">
                            <i class="fas fa-palette"></i>
                        </div>
                        <h5 class="card-title" style="color: #1f2937;">UX/UI Design</h5>
                        <p class="card-text" style="color: #6b7280;">Beautiful, intuitive designs that enhance user experience and drive engagement across all devices.</p>
                    </div>
                </div>
            </div>
            <div class="col-lg-4 col-md-6 mb-4">
                <div class="card service-card" style="background: white; border: 1px solid #e5e7eb; box-shadow: 0 1px 3px rgba(0,0,0,0.1); transition: all 0.3s ease;">
                    <div class="card-body" style="padding: 2.5rem 2rem;">
                        <div class="service-icon">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <h5 class="card-title" style="color: #1f2937;">Digital Strategy</h5>
                        <p class="card-text" style="color: #6b7280;">Data-driven strategies to maximize your digital presence and achieve measurable business results.</p>
                    </div>
                </div>
            </div>
            <div class="col-lg-4 col-md-6 mb-4">
                <div class="card service-card" style="background: white; border: 1px solid #e5e7eb; box-shadow: 0 1px 3px rgba(0,0,0,0.1); transition: all 0.3s ease;">
                    <div class="card-body" style="padding: 2.5rem 2rem;">
                        <div class="service-icon">
                            <i class="fas fa-cogs"></i>
                        </div>
                        <h5 class="card-title" style="color: #1f2937;">CMS Solutions</h5>
                        <p class="card-text" style="color: #6b7280;">Powerful content management systems that give you full control over your digital content.</p>
                    </div>
                </div>
            </div>
            <div class="col-lg-4 col-md-6 mb-4">
                <div class="card service-card" style="background: white; border: 1px solid #e5e7eb; box-shadow: 0 1px 3px rgba(0,0,0,0.1); transition: all 0.3s ease;">
                    <div class="card-body" style="padding: 2.5rem 2rem;">
                        <div class="service-icon">
                            <i class="fas fa-mobile-alt"></i>
                        </div>
                        <h5 class="card-title" style="color: #1f2937;">Mobile Apps</h5>
                        <p class="card-text" style="color: #6b7280;">Native and cross-platform mobile applications that deliver exceptional user experiences.</p>
                    </div>
                </div>
            </div>
            <div class="col-lg-4 col-md-6 mb-4">
                <div class="card service-card" style="background: white; border: 1px solid #e5e7eb; box-shadow: 0 1px 3px rgba(0,0,0,0.1); transition: all 0.3s ease;">
                    <div class="card-body" style="padding: 2.5rem 2rem;">
                        <div class="service-icon">
                            <i class="fas fa-cloud"></i>
                        </div>
                        <h5 class="card-title" style="color: #1f2937;">Cloud Solutions</h5>
                        <p class="card-text" style="color: #6b7280;">Scalable cloud infrastructure and services to support your growing business needs.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Featured Products Section -->
<section style="background: var(--bg-darker);">
    <div class="container">
        <div class="mb-5">
            <p class="text-uppercase" style="color: var(--primary-button); font-weight: 500; letter-spacing: 1px; margin-bottom: 2rem;">Featured Products →</p>
            <h2 class="fw-bold">Discover our most popular and innovative solutions</h2>
        </div>
        
        @{
            // Get featured products from Umbraco content
            var featuredProducts = Umbraco.ContentAtRoot()
                .SelectMany(x => x.DescendantsOrSelf())
                .Where(x => x.IsVisible() && x.ContentType.Alias == "product")
                .OrderByDescending(x => x.Value<decimal>("rating"))
                .Take(3)
                .ToList();
        }
        
        @if (featuredProducts.Any())
        {
            <div class="row">
                @foreach (var product in featuredProducts)
                {
                    var productTitle = product.Value<string>("productTitle") ?? product.Name;
                    var price = product.Value<decimal>("price");
                    var category = product.Value<string>("category");
                    var rating = product.Value<decimal>("rating");
                    
                    var iconClass = category?.ToLower() switch
                    {
                        "electronics" => "fas fa-laptop",
                        "clothing" => "fas fa-tshirt",
                        "books" => "fas fa-book",
                        "home" => "fas fa-home",
                        "toys" => "fas fa-gamepad",
                        _ => "fas fa-box"
                    };
                    
                    var gradientBg = category?.ToLower() switch
                    {
                        "electronics" => "background: radial-gradient(circle at 30% 40%, rgba(120, 119, 198, 0.8) 0%, rgba(255, 119, 198, 0.6) 50%, transparent 100%);",
                        "clothing" => "background: radial-gradient(circle at 70% 30%, rgba(255, 119, 198, 0.8) 0%, rgba(120, 200, 255, 0.6) 50%, transparent 100%);",
                        "books" => "background: radial-gradient(circle at 50% 60%, rgba(120, 200, 255, 0.8) 0%, rgba(120, 255, 200, 0.6) 50%, transparent 100%);",
                        "home" => "background: radial-gradient(circle at 20% 80%, rgba(120, 255, 200, 0.8) 0%, rgba(255, 200, 120, 0.6) 50%, transparent 100%);",
                        "toys" => "background: radial-gradient(circle at 80% 20%, rgba(255, 200, 120, 0.8) 0%, rgba(255, 119, 198, 0.6) 50%, transparent 100%);",
                        _ => "background: radial-gradient(circle at 50% 50%, rgba(120, 119, 198, 0.8) 0%, rgba(255, 119, 198, 0.6) 50%, transparent 100%);"
                    };
                    
                    <div class="col-lg-4 col-md-6 mb-4">
                        <div class="card product-card">
                            <div class="product-image card-img-top d-flex align-items-center justify-content-center position-relative" style="height: 200px; @gradientBg background-color: var(--bg-darker);">
                                <i class="@iconClass" style="font-size: 4rem; color: white; opacity: 0.9; z-index: 2;"></i>
                                <div class="position-absolute w-100 h-100" style="background: var(--bg-darker); opacity: 0.3; z-index: 1;"></div>
                            </div>
                            <div class="card-body">
                                <h5 class="card-title">@productTitle</h5>
                                <p class="text-muted">@category</p>
                                <div class="d-flex justify-content-between align-items-center">
                                    <span class="price">$@price.ToString("F2")</span>
                                    <div class="rating">
                                        @{
                                            var ratingValue = (double)rating;
                                        }
                                        @for (int i = 1; i <= 5; i++)
                                        {
                                            if (i <= ratingValue)
                                            {
                                                <i class="fas fa-star"></i>
                                            }
                                            else if (i - 0.5 <= ratingValue)
                                            {
                                                <i class="fas fa-star-half-alt"></i>
                                            }
                                            else
                                            {
                                                <i class="far fa-star"></i>
                                            }
                                        }
                                        <span class="ms-1">@rating.ToString("F1")</span>
                                    </div>
                                </div>
                                <div class="d-flex gap-2 mt-3">
                                    <a href="@product.Url()" class="btn btn-outline-light flex-grow-1">View Details</a>
                                    <button class="btn btn-primary" data-product-id="@product.Id" data-product-title="@productTitle" data-product-price="@price" data-product-category="@category" data-product-url="@product.Url()" onclick="addToCartFromHomeData(this)">
                                        <i class="fas fa-cart-plus"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                }
            </div>
        }
        else
        {
            <!-- Fallback if no products found -->
            <div class="row">
                <div class="col-lg-4 col-md-6 mb-4">
                    <div class="card product-card">
                        <div class="product-image card-img-top d-flex align-items-center justify-content-center position-relative" style="height: 200px; background: radial-gradient(circle at 50% 50%, rgba(120, 119, 198, 0.8) 0%, rgba(255, 119, 198, 0.6) 50%, transparent 100%); background-color: var(--bg-darker);">
                            <i class="fas fa-laptop" style="font-size: 4rem; color: white; opacity: 0.9; z-index: 2;"></i>
                            <div class="position-absolute w-100 h-100" style="background: var(--bg-darker); opacity: 0.3; z-index: 1;"></div>
                        </div>
                        <div class="card-body">
                            <h5 class="card-title">Sample Product</h5>
                            <p class="text-muted">Electronics</p>
                            <div class="d-flex justify-content-between align-items-center">
                                <span class="price">$999</span>
                                <div class="rating">
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <span class="ms-1">5.0</span>
                                </div>
                            </div>
                            <a href="/products" class="btn btn-primary w-100 mt-3">View Details</a>
                        </div>
                    </div>
                </div>
            </div>
        }
        
        <div class="text-center mt-4">
            <a href="/products" class="btn btn-outline-light btn-lg">View All Products</a>
        </div>
    </div>
</section>

<!-- Stats Section -->
<section class="stats-section">
    <div class="container">
        <div class="row text-center">
            <div class="col-lg-3 col-md-6 mb-4">
                <div class="stat-item">
                    <h3 class="display-4 fw-bold" style="color: var(--text-white);">500+</h3>
                    <p class="lead" style="color: var(--text-gray);">Projects Completed</p>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 mb-4">
                <div class="stat-item">
                    <h3 class="display-4 fw-bold" style="color: var(--text-white);">50+</h3>
                    <p class="lead" style="color: var(--text-gray);">Happy Clients</p>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 mb-4">
                <div class="stat-item">
                    <h3 class="display-4 fw-bold" style="color: var(--text-white);">5+</h3>
                    <p class="lead" style="color: var(--text-gray);">Years Experience</p>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 mb-4">
                <div class="stat-item">
                    <h3 class="display-4 fw-bold" style="color: var(--text-white);">24/7</h3>
                    <p class="lead" style="color: var(--text-gray);">Support Available</p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- CTA Section -->
<section style="background: #f8fafc; padding: 5rem 0;">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 mx-auto text-center">
                <h2 class="fw-bold mb-4" style="color: #1f2937;">Ready to Get Started?</h2>
                <p class="lead mb-4" style="color: #6b7280;">Let's work together to create something amazing. Contact us today to discuss your project and see how we can help bring your vision to life.</p>
                <div class="d-flex gap-3 justify-content-center flex-wrap">
                    <a href="/products" class="btn btn-primary btn-lg">Explore Products</a>
                    <a href="#contact" class="btn" style="border: 2px solid #374151; color: #374151; background: transparent; border-radius: 30px; padding: 1rem 2.5rem; font-size: 1rem; font-weight: 500; text-transform: uppercase; letter-spacing: 0.5px; text-decoration: none; transition: all 0.3s ease;" onmouseover="this.style.background='#374151'; this.style.color='white';" onmouseout="this.style.background='transparent'; this.style.color='#374151';">Get In Touch</a>
                </div>
            </div>
        </div>
    </div>
</section>

<script>
    function addToCartFromHomeData(button) {
        const productData = {
            id: button.getAttribute('data-product-id'),
            title: button.getAttribute('data-product-title'),
            price: parseFloat(button.getAttribute('data-product-price')),
            category: button.getAttribute('data-product-category'),
            url: button.getAttribute('data-product-url')
        };
        
        addToCart(productData);
    }

    // Keep the old function for compatibility if needed
    function addToCartFromHome(id, title, price, category, url) {
        const productData = {
            id: id,
            title: title,
            price: price,
            category: category,
            url: url
        };
        
        addToCart(productData);
    }
</script>